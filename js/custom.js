document.addEventListener("DOMContentLoaded",(function(){async function e(){const e=document.getElementById("history-container");if(!e)return;const t=(await async function(){const e=new Date,t=(`${e.getMonth()+1}`.padStart(2,"0"),`${e.getDate()}`.padStart(2,"0"),"https://api.nsmao.net/api/history/query?key=TJtSoMT2biwk2PBxiSLMx03VnH");try{const e=await fetch(t),o=await e.json();if(200===o.code){const e=o.data;return Object.entries(e).map((([e,t])=>({year:e.replace(/å¹´$/,""),title:t})))}return console.error("Error fetching history data:",o.msg),[]}catch(e){return console.error("Fetch error:",e),[]}}()).map((e=>`\n        <div class="swiper-slide history_slide">\n            <span class="history_slide_time">A.D.${e.year}</span>\n            <span class="history_slide_link">${e.title}</span>\n        </div>\n    `)).join(""),o=document.querySelector(".history_swiper-container");document.getElementById("history_container_wrapper").innerHTML=t;const s=new Swiper(o,{loop:!0,direction:"vertical",autoplay:{disableOnInteraction:!0,delay:5e3},mousewheel:!1});e.onmouseenter=()=>s.autoplay.stop(),e.onmouseleave=()=>s.autoplay.start()}e(),document.addEventListener("pjax:complete",e),e(),document.addEventListener("pjax:complete",e)}));const largeCircle=document.getElementById("largeCircle"),smallCircle=document.getElementById("smallCircle");let isMouseDown=!1,isLargeCircleVisible=!1,mouseX=0,mouseY=0;function setPosition(e,t){const o=largeCircle.offsetWidth/2,s=smallCircle.offsetWidth/2;smallCircle.style.left=e-s+"px",smallCircle.style.top=t-s+"px",largeCircle.style.left=e-o+"px",largeCircle.style.top=t-o+"px",largeCircle.style.transform=isMouseDown?"scale(0.5)":"scale(1)",smallCircle.style.transform=isMouseDown?"scale(2)":"scale(1)"}function updateHoverStatus(e,t){const o=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, a, div, pre, code, input, textarea");let s=Array.from(o).some((o=>Array.from(o.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE)).some((o=>{const s=document.createRange();return s.selectNodeContents(o),Array.from(s.getClientRects()).some((o=>e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom))}))));const n=document.querySelectorAll("input, textarea");s=s||Array.from(n).some((o=>{const s=o.getBoundingClientRect();return e>=s.left&&e<=s.right&&t>=s.top&&t<=s.bottom})),document.body.classList.toggle("hovered",s)}function animate(){setPosition(mouseX,mouseY),updateHoverStatus(mouseX,mouseY),isLargeCircleVisible||(isLargeCircleVisible=!0,largeCircle.style.display="block",smallCircle.style.display="block"),requestAnimationFrame(animate)}function handleMove(e){mouseX=e.clientX,mouseY=e.clientY,isLargeCircleVisible||requestAnimationFrame(animate)}document.addEventListener("mousemove",handleMove),document.addEventListener("mousedown",(e=>{isMouseDown=!0,mouseX=e.clientX,mouseY=e.clientY,setPosition(mouseX,mouseY),largeCircle.classList.add("pulse")})),document.addEventListener("mouseup",(()=>{isMouseDown=!1,setPosition(mouseX,mouseY),largeCircle.classList.remove("pulse")}));